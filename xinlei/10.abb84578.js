(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1034:function(t,e,r){var a=r(1035);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,r(2).default)("249d8429",a,!0,{})},1035:function(t,e,r){},1049:function(t,e,r){"use strict";r.r(e);r(1034);var a=r(627),n=r(86),o=r(15);function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){if(null==t)return{};var r,a,n=function(t,e){if(null==t)return{};var r,a,n={},o=Object.keys(t);for(a=0;a<o.length;a++)r=o[a],e.indexOf(r)>=0||(n[r]=t[r]);return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)r=o[a],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var l={name:"profit",data:function(){return{prefixCls:"xcj-finance-profit",storeOptions:[],queryParams:{date:this.initQueryDate(),storeId:"",currentPage:1,size:10},listLoading:!1,list:[],total:0,profitTotal:0,onDateChange:null}},created:function(){var t=this;this.initData(),this.onDateChange=Object(n.a)(function(){t.queryParams.currentPage=1,t.getProfitStatsList(t.queryParams)},200)},methods:{handleSelectStore:function(){this.getProfitStatsList(this.queryParams)},handleSizeChange:function(t){this.queryParams.size=t,this.getProfitStatsList()},handleCurrentChange:function(t,e){this.queryParams.currentPage=t,this.getProfitStatsList()},getProfitStatsList:function(){var t=this,e=this.formatQueryParams();this.listLoading=!0,function(t){return Object(o.a)({method:"get",url:"/api/v1/statistics/queryServerStaticsList",params:t})}(e).then(function(e){var r=e.resultObj,a=e.totalSize,n=r.serverstaticsList,o=r.profitTotal;t.listLoading=!1,t.list=n||[],t.total=a,t.profitTotal=o}).catch(function(e){t.listLoading=!1})},formatQueryParams:function(){var t=this.queryParams,e=t.date,r=s(t,["date"]);return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),a.forEach(function(e){i(t,e,r[e])})}return t}({start:e&&Array.isArray(e)?e[0]:"",end:e&&Array.isArray(e)?e[1]:""},r)},formatTime:function(t,e,r){return a.b.format(r,"YYYY-MM-DD")},initQueryDate:function(){var t=a.b.format(+new Date,"YYYY-MM-DD"),e=+new Date-5184e6;return[a.b.format(e,"YYYY-MM-DD"),t]},initData:function(){var t=this;Object(o.a)({url:"/api/v1/store/queryStoreByUser",method:"get"}).then(function(e){var r=e.resultObj;r&&Array.isArray(r)&&r.length>0&&(t.storeOptions=r.map(function(e,r){var a=e.storeId,n=e.storeName;return 0===r&&(t.queryParams.storeId=a),{label:n,value:a}}),t.getProfitStatsList(t.queryParams))})}}},u=r(13),c=Object(u.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.prefixCls},[r("el-form",{staticClass:"filter-container",attrs:{inline:!0},model:{value:t.queryParams,callback:function(e){t.queryParams=e},expression:"queryParams"}},[r("el-form-item",{attrs:{label:"门店"}},[r("el-select",{attrs:{placeholder:"请选择门店"},on:{input:t.handleSelectStore},model:{value:t.queryParams.storeId,callback:function(e){t.$set(t.queryParams,"storeId",e)},expression:"queryParams.storeId"}},t._l(t.storeOptions,function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"起止时间"}},[r("el-date-picker",{attrs:{clearable:!1,type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.onDateChange},model:{value:t.queryParams.date,callback:function(e){t.$set(t.queryParams,"date",e)},expression:"queryParams.date"}})],1),t._v(" "),r("div",{staticClass:"paytotal"},[r("el-tag",[t._v("合计到账服务额："+t._s(t.profitTotal)+" 元")])],1)],1),t._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],class:t.prefixCls+"-table",attrs:{data:t.list}},[r("el-table-column",{attrs:{prop:"day",label:"日期",align:"center",formatter:t.formatTime,"show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{prop:"storeName",label:"门店名称",align:"center","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{prop:"serverAmount",label:"服务额",align:"center","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{prop:"profitAmount",label:"到账服务额",align:"center","show-overflow-tooltip":""}})],1),t._v(" "),r("div",{class:t.prefixCls+"-pagination"},[r("el-pagination",{attrs:{background:"","current-page":t.queryParams.currentPage,"page-sizes":[10,20,30,50],"page-size":t.queryParams.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},[],!1,null,null,null);c.options.__file="index.vue";e.default=c.exports},627:function(t,e,r){"use strict";r.d(e,"b",function(){return o}),r.d(e,"d",function(){return i}),r.d(e,"a",function(){return s}),r.d(e,"c",function(){return l});var a=r(634);function n(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,o;return e=t,o=[{key:"format",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return t&&"number"==typeof t?Object(a.format)(t,e):""}}],(r=null)&&n(e.prototype,r),o&&n(e,o),t}(),i=function(t,e){for(var r=[],n=t;n<=e;)r.push(Object(a.format)(n,"YYYY-MM-DD")),n+=864e5;return r},s=function(t){for(var e=[],r=1;r<13;r++)r<10?e.push("".concat(t,"-0").concat(r)):e.push("".concat(t,"-").concat(r));return e},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return t&&"number"==typeof t?Object(a.format)(t,e):""}}}]);